<!DOCTYPE html>
<html>
<head>
  <title>RT Messaging Bridge</title>
  <script src="https://cdn.jsdelivr.net/npm/backendless@7/dist/backendless.min.js"></script>
</head>
<body>
  <h2>Listening for messages...</h2>

  <script>
    const APP_ID = "9561383D-4BC2-F4F1-FF73-B529BFE77000";
    const API_KEY = "BEE4A193-7ADC-419B-9EB4-202FDA99ACC6";  // Messaging Read-Only key
    const PUBLISHER_OBJECT_ID = "236E3176-6F40-BBB6-FF42-5D0E7E2F2300";
    const CHANNEL_NAME = PUBLISHER_OBJECT_ID.substring(0, 6);

    Backendless.initApp(APP_ID, API_KEY);

    try {
      const channel = Backendless.Messaging.subscribe(CHANNEL_NAME);
      console.log("✅ Subscribed to channel:", CHANNEL_NAME);

      // You can even delay the listener slightly just to be safe
      setTimeout(() => {
        channel.addMessageListener((message) => {
          console.log("📩 Message received:", message);
        });
      }, 500); // 500ms delay before adding listener
    } catch (error) {
      console.error("❌ Subscription failed:", error);
    }
  </script>
</body>
</html>
